<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù„Ø¹Ø¨Ø© Ø³ÙŠÙ† Ø¬ÙŠÙ… Ø°Ø§ØªÙŠØ© Ø§Ù„ØªØºØ°ÙŠØ©</title>

<style>
body {
  font-family: Arial;
  background: #111;
  color: white;
  text-align: center;
}
table {
  width: 100%;
  border-collapse: collapse;
}
td, th {
  border: 1px solid #444;
  padding: 15px;
  cursor: pointer;
}
td.used {
  background: #222;
  cursor: not-allowed;
}
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.9);
  display: none;
  justify-content: center;
  align-items: center;
}
.box {
  background: #222;
  padding: 30px;
  width: 80%;
  border-radius: 10px;
}
button {
  padding: 10px 20px;
  margin: 10px;
}
#timer {
  font-size: 30px;
  color: yellow;
}
</style>
</head>

<body>

<h1>ðŸŽ® Ù„Ø¹Ø¨Ø© Ø³ÙŠÙ† Ø¬ÙŠÙ… (ØªÙˆÙ„ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ)</h1>

<table>
<tr>
  <th>Ø±ÙŠØ§Ø¶Ø©</th>
  <th>Ø¹Ù„ÙˆÙ…</th>
  <th>ØªØ§Ø±ÙŠØ®</th>
</tr>
<tr>
  <td onclick="showQ('Ø±ÙŠØ§Ø¶Ø©',200,this)">200</td>
  <td onclick="showQ('Ø¹Ù„ÙˆÙ…',200,this)">200</td>
  <td onclick="showQ('ØªØ§Ø±ÙŠØ®',200,this)">200</td>
</tr>
<tr>
  <td onclick="showQ('Ø±ÙŠØ§Ø¶Ø©',400,this)">400</td>
  <td onclick="showQ('Ø¹Ù„ÙˆÙ…',400,this)">400</td>
  <td onclick="showQ('ØªØ§Ø±ÙŠØ®',400,this)">400</td>
</tr>
<tr>
  <td onclick="showQ('Ø±ÙŠØ§Ø¶Ø©',600,this)">600</td>
  <td onclick="showQ('Ø¹Ù„ÙˆÙ…',600,this)">600</td>
  <td onclick="showQ('ØªØ§Ø±ÙŠØ®',600,this)">600</td>
</tr>
</table>

<div class="modal" id="qModal">
  <div class="box">
    <div id="timer">30</div>
    <h2 id="qText"></h2>
    <h3 id="aText" style="display:none;"></h3>
    <button id="revealBtn" onclick="reveal()">Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
    <button onclick="closeQ()">Ø¥ØºÙ„Ø§Ù‚</button>
  </div>
</div>

<script>
let autoDB = JSON.parse(localStorage.getItem("autoQuestions")) || {};
let timerInt;

async function getQuestion(cat,val){
  if(!autoDB[cat]) autoDB[cat]={};
  if(!autoDB[cat][val]) autoDB[cat][val]=[];

  if(autoDB[cat][val].length===0){
    const res = await fetch("https://opentdb.com/api.php?amount=1&type=boolean");
    const data = await res.json();

    autoDB[cat][val].push({
      q: data.results[0].question,
      a: data.results[0].correct_answer
    });

    localStorage.setItem("autoQuestions",JSON.stringify(autoDB));
  }

  return autoDB[cat][val].pop();
}

async function showQ(cat,val,el){
  if(el.classList.contains("used")) return;
  el.classList.add("used");

  const q = await getQuestion(cat,val);

  document.getElementById("qText").innerHTML = q.q;
  document.getElementById("aText").innerText = "Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©: " + q.a;
  document.getElementById("aText").style.display="none";
  document.getElementById("qModal").style.display="flex";

  startTimer();
}

function reveal(){
  document.getElementById("aText").style.display="block";
}

function closeQ(){
  clearInterval(timerInt);
  document.getElementById("qModal").style.display="none";
}

function startTimer(){
  let t=30;
  document.getElementById("timer").innerText=t;
  timerInt=setInterval(()=>{
    t--;
    document.getElementById("timer").innerText=t;
    if(t<=0) clearInterval(timerInt);
  },1000);
}
</script>

</body>
</html>
